{% assign s = site.data.profile.social %}
{% assign sites = site.data.profile.websites %}

<div class="social" aria-label="Social links">
  {%- comment -%} Primary identity anchors {%- endcomment -%}
  {% if s.github and s.github != "" %}
    <a class="iconbtn is-primary" href="{{ s.github }}" aria-label="GitHub" data-tooltip="GitHub" rel="me noopener noreferrer">
      {% include svg/github.svg %}
    </a>
  {% endif %}

  {% if s.linkedin and s.linkedin != "" %}
    <a class="iconbtn is-primary" href="{{ s.linkedin }}" aria-label="LinkedIn" data-tooltip="LinkedIn" rel="me noopener noreferrer">
      {% include svg/linkedin.svg %}
    </a>
  {% endif %}

  {%- comment -%} Websites[] (DTB396 primary first). If websites[] exists, DO NOT also render s.website. {%- endcomment -%}
  {% if sites %}
    {% assign primary_sites = sites | where: "primary", true %}
    {% assign secondary_sites = sites | where_exp: "item", "item.primary != true" %}

    {% for site in primary_sites %}
      <a class="iconbtn is-primary is-globe" href="{{ site.url }}" aria-label="{{ site.label }}" data-tooltip="{{ site.label }}" rel="noopener noreferrer">
        {% include svg/globe.svg %}
      </a>
    {% endfor %}

    {% for site in secondary_sites %}
      <a class="iconbtn is-globe" href="{{ site.url }}" aria-label="{{ site.label }}" data-tooltip="{{ site.label }}" rel="noopener noreferrer">
        {% include svg/globe.svg %}
      </a>
    {% endfor %}

  {% elsif s.website and s.website != "" %}
    <a class="iconbtn is-primary is-globe" href="{{ s.website }}" aria-label="Website" data-tooltip="Website" rel="noopener noreferrer">
      {% include svg/globe.svg %}
    </a>
  {% endif %}

  {%- comment -%} Social presence {%- endcomment -%}
  {% if s.x and s.x != "" %}
    <a class="iconbtn" href="{{ s.x }}" aria-label="X" data-tooltip="X" rel="me noopener noreferrer">
      {% include svg/x.svg %}
    </a>
  {% endif %}

  {% if s.instagram and s.instagram != "" %}
    <a class="iconbtn" href="{{ s.instagram }}" aria-label="Instagram" data-tooltip="Instagram" rel="me noopener noreferrer">
      {% include svg/instagram.svg %}
    </a>
  {% endif %}

  {% if s.youtube and s.youtube != "" %}
    <a class="iconbtn" href="{{ s.youtube }}" aria-label="YouTube" data-tooltip="YouTube" rel="me noopener noreferrer">
      {% include svg/youtube.svg %}
    </a>
  {% endif %}

  {% if s.snapchat and s.snapchat != "" %}
    <a class="iconbtn" href="{{ s.snapchat }}" aria-label="Snapchat" data-tooltip="Snapchat" rel="me noopener noreferrer">
      {% include svg/snapchat.svg %}
    </a>
  {% endif %}

  {% if s.email and s.email != "" %}
    <a class="iconbtn" href="mailto:{{ s.email | escape }}" aria-label="Email" data-tooltip="Email">
      {% include svg/mail.svg %}
    </a>
  {% endif %}
</div>